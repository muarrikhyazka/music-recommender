tunnel: munder
credentials-file: /etc/cloudflared/credentials.json

ingress:
  # Main application routes
  - hostname: munder.myghty.cloud
    service: http://localhost:3000
    originRequest:
      httpHostHeader: munder.myghty.cloud
      originServerName: munder.myghty.cloud
  
  # API routes
  - hostname: api.munder.myghty.cloud  
    service: http://localhost:3001
    originRequest:
      httpHostHeader: api.munder.myghty.cloud
      originServerName: api.munder.myghty.cloud
      
  # Metrics and monitoring (optional - secure this properly)
  - hostname: metrics.munder.myghty.cloud
    service: http://localhost:3001
    path: /api/metrics/*
    originRequest:
      httpHostHeader: metrics.munder.myghty.cloud
  
  # WebSocket support for real-time features (future use)
  - hostname: ws.munder.myghty.cloud
    service: http://localhost:3001
    originRequest:
      noTLSVerify: false
      
  # Catch-all rule (required)
  - service: http_status:404

# Additional tunnel configuration
logLevel: info
transport-protocol: quic

# Auto-update cloudflared
no-autoupdate: false

# Metrics
metrics: localhost:9090

# Proxy settings for better performance  
proxy-connect-timeout: 30s
proxy-tls-timeout: 30s
proxy-tcp-keepalive: 30s
proxy-no-happy-eyeballs: false

# Compression
compression: gzip